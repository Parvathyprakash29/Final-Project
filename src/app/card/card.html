<div class="container mt-4">
  <div class="store-grid">
    @if (error) {
    <div class="error-products alert alert-warning">
      <h3>Unable to load products</h3>
      <p>{{ error }}</p>
      <p>Please check your internet connection or try again later.</p>
    </div>
    } @else if (products.length === 0) {
    <div class="no-products text-center mt-5">
      <div class="spinner-border text-primary mb-3" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <h3>Loading products...</h3>
    </div>
    }
    @for (item of products; track item.id) {
    <div class="card h-100 shadow-sm border-0">
      <!-- Fallback for image -->
      <img [src]="item.avatar || item.image || item.thumbnail || 'https://placehold.co/400x300?text=No+Image'"
        class="card-img-top product-img" alt="{{ item.name || item.title }}"
        style="height: 200px; object-fit: cover;" />
      <div class="card-body d-flex flex-column">
        <!-- Fallback for name/title -->
        <h5 class="card-title">{{ item.name || item.title }}</h5>
        <!-- Formatting price if available -->
        <p class="card-text fw-bold text-primary">{{ (item.price || 0) | currency }}</p>

        <div class="mt-auto d-grid gap-2">
          <button class="btn btn-outline-primary btn-sm">Add to Cart</button>
          <a [routerLink]="['/singlelist-view', item.id]" class="btn btn-primary btn-sm">View Details</a>
        </div>
      </div>
    </div>
    }
  </div>

  <style>
    .store-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
      padding-bottom: 2rem;
    }

    .card {
      transition: transform 0.2s;
    }

    .card:hover {
      transform: translateY(-5px);
    }
  </style>
</div>